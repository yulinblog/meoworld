import{b as O}from"./unsplashApi-cf2a1fd3.js";import{p as I,v as c,u as S,c as _,w as o,d as Y,o as p,a as s,g as z,K as A,m as t,I as F,C as n,D as L,t as h,A as M,U as b,k as C,h as V,B as g,e as x,r as D,F as q,f as N,Q as P,bb as R,O as T}from"./index-238de57f.js";import{h as $}from"./moment-fbc5633a.js";const j=t("span",null," Unsplash Collections",-1),E={class:"w-25"},K={class:"font-weight-bold"},Q={class:"font-weight-bold"},G=["src"],H={class:"text-center"},J={class:"pa-2"},W={class:"d-flex align-center"},X=["colspan"],ae=I({__name:"CollectionsDataPage",setup(Z){const m=c(!0),v=c(0),r=S({query:"cat",page:1,per_page:10}),U=[{title:"ID",key:"id"},{title:"标题",key:"title"},{title:"拥有者",key:"user"},{title:"照片数量",key:"total_photos",align:"center"},{title:"封面图",key:"cover_photo",align:"center"},{title:"预览图",key:"preview_photos",align:"center"},{title:"链接",key:"links"},{title:"标签",key:"tags",width:"300px",align:"center"},{title:"发布时间",key:"published_at"}],f=c([]),y=async()=>{m.value=!0;const a=await O(r);f.value=a.data.results.map(l=>({id:l.id,title:l.title,user:l.user,total_photos:l.total_photos,cover_photo:l.cover_photo,preview_photos:l.preview_photos,links:l.links,tags:l.tags,published_at:$(l.published_at).format("YYYY/MM/DD")})),v.value=a.data.total,m.value=!1},B=async i=>{r.query&&(r.per_page=i.itemsPerPage,r.page=i.page,await y())},d=c(!1),k=c(""),w=i=>{k.value=i,d.value=!0};return(i,a)=>{const l=T("v-data-table-server");return p(),_(Y,null,{default:o(()=>[s(N,null,{default:o(()=>[s(z,{class:"font-weight-bold"},{default:o(()=>[j,s(A),t("div",E,[s(F,{modelValue:n(r).query,"onUpdate:modelValue":a[0]||(a[0]=e=>n(r).query=e),variant:"solo","prepend-inner-icon":"mdi-magnify","onClick:append":y,label:"Search","single-line":"","hide-details":"",clearable:"",density:"compact"},null,8,["modelValue"])])]),_:1}),s(L),t("div",null,[s(l,{headers:U,items:n(f),search:n(r).query,loading:n(m),"items-per-page":n(r).per_page,"items-length":n(v),"item-value":"id","onUpdate:options":B,"fixed-header":"",height:"900"},{item:o(({item:e})=>[t("tr",null,[t("td",null,"# "+h(e.columns.id),1),t("td",K,h(e.columns.title),1),t("td",Q,[s(M,{size:"30",class:"mr-2"},{default:o(()=>[t("img",{src:e.columns.user.profile_image.small,alt:"alt"},null,8,G)]),_:2},1024),s(b,{text:e.columns.user.username},null,8,["text"])]),t("td",H,[s(C,{size:"small"},{default:o(()=>[V(h(e.columns.total_photos),1)]),_:2},1024)]),t("td",J,[s(g,{src:e.columns.cover_photo.urls.thumb,height:"100",width:"160",cover:"",class:"rounded-lg v-card--link",onClick:u=>w(e.columns.cover_photo.urls.regular)},null,8,["src","onClick"])]),t("td",null,[t("div",W,[(p(!0),x(q,null,D(e.columns.preview_photos,u=>(p(),_(g,{key:u.id,src:u.urls.thumb,onClick:ee=>w(u.urls.regular),height:"100",width:"60",cover:"",class:"mr-2 rounded-lg v-card--link"},null,8,["src","onClick"]))),128))])]),t("td",null,[s(b,{text:e.columns.links.html},null,8,["text"])]),t("td",null,[(p(!0),x(q,null,D(e.columns.tags,u=>(p(),_(C,{variant:"outlined",color:"grey",size:"small",class:"font-weight-bold mx-1 my-1"},{default:o(()=>[V(h(u.title),1)]),_:2},1024))),256))]),t("td",null,h(e.columns.published_at),1)])]),"expanded-row":o(({columns:e})=>[t("tr",null,[t("td",{colspan:e.length},"More info about",8,X)])]),_:1},8,["items","search","loading","items-per-page","items-length"])])]),_:1}),s(R,{modelValue:n(d),"onUpdate:modelValue":a[2]||(a[2]=e=>P(d)?d.value=e:null),"location-strategy":"connected","scroll-strategy":"none"},{default:o(()=>[t("div",{onClick:a[1]||(a[1]=e=>d.value=!1),class:"w-screen h-screen d-flex align-center justify-center"},[s(g,{height:"80%",src:n(k)},null,8,["src"])])]),_:1},8,["modelValue"])]),_:1})}}});export{ae as default};
