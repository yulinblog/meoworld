import{g as C}from"./unsplashApi-cf2a1fd3.js";import{p as x,v as c,u as T,c as V,w as r,d as D,o as _,a as s,g as q,K as U,m as t,I as B,C as o,D as O,j as I,t as u,B as g,e as S,r as Y,F,k as L,h as N,U as P,f as R,Q as $,bb as j,O as M}from"./index-238de57f.js";import{h as z}from"./moment-fbc5633a.js";const A=t("span",null," Unsplash Topics",-1),E={class:"w-25"},K={class:"font-weight-bold"},Q={class:"font-weight-bold"},G={class:"pa-2"},H={class:"d-flex align-center"},J={class:"text-center"},se=x({__name:"TopicsDataPage",setup(W){const h=c(!0),m=c(0),n=T({query:"cat",page:1,per_page:19}),w=[{title:"ID",key:"id"},{title:"标题",key:"title"},{title:"封面图",key:"cover_photo",align:"center"},{title:"预览图",key:"preview_photos",align:"center"},{title:"照片数量",key:"total_photos",align:"center"},{title:"描述",key:"description",width:"500px"},{title:"链接",key:"links"},{title:"发布时间",key:"published_at"},{title:"",key:"data-table-expand"}],v=c([]),f=async()=>{h.value=!0;const a=await C(n);v.value=a.data.map(l=>({id:l.id,title:l.title,description:l.description,total_photos:l.total_photos,cover_photo:l.cover_photo,preview_photos:l.preview_photos,links:l.links,published_at:z(l.published_at).format("YYYY/MM/DD")})),m.value=a.data.length,h.value=!1},b=async i=>{n.query&&(n.per_page=i.itemsPerPage,n.page=i.page,await f())},d=c(!1),k=c(""),y=i=>{k.value=i,d.value=!0};return(i,a)=>{const l=M("v-data-table-server");return _(),V(D,null,{default:r(()=>[s(R,null,{default:r(()=>[s(q,{class:"font-weight-bold"},{default:r(()=>[A,s(U),t("div",E,[s(B,{modelValue:o(n).query,"onUpdate:modelValue":a[0]||(a[0]=e=>o(n).query=e),variant:"solo","prepend-inner-icon":"mdi-magnify","onClick:append":f,label:"Search","single-line":"","hide-details":"",clearable:"",density:"compact"},null,8,["modelValue"])])]),_:1}),s(O),s(I,null,{default:r(()=>[s(l,{headers:w,items:o(v),search:o(n).query,loading:o(h),"items-per-page":o(n).per_page,"items-length":o(m),"item-value":"id","onUpdate:options":b,"fixed-header":"",height:"900"},{item:r(({item:e})=>[t("tr",null,[t("td",K,"#"+u(e.columns.id),1),t("td",Q,u(e.columns.title),1),t("td",G,[s(g,{src:e.columns.cover_photo.urls.thumb,height:"100",width:"160",cover:"",class:"rounded-lg v-card--link",onClick:p=>y(e.columns.cover_photo.urls.regular)},null,8,["src","onClick"])]),t("td",null,[t("div",H,[(_(!0),S(F,null,Y(e.columns.preview_photos,p=>(_(),V(g,{key:p.id,src:p.urls.thumb,height:"100",width:"60",cover:"",class:"mr-2 rounded-lg v-card--link",onClick:X=>y(p.urls.regular)},null,8,["src","onClick"]))),128))])]),t("td",J,[s(L,{size:"small"},{default:r(()=>[N(u(e.columns.total_photos),1)]),_:2},1024)]),t("td",null,u(e.columns.description),1),t("td",null,[s(P,{text:e.columns.links.html},null,8,["text"])]),t("td",null,u(e.columns.published_at),1)])]),_:1},8,["items","search","loading","items-per-page","items-length"])]),_:1})]),_:1}),s(j,{modelValue:o(d),"onUpdate:modelValue":a[2]||(a[2]=e=>$(d)?d.value=e:null),"location-strategy":"connected","scroll-strategy":"none"},{default:r(()=>[t("div",{onClick:a[1]||(a[1]=e=>d.value=!1),class:"w-screen h-screen d-flex align-center justify-center"},[s(g,{height:"80%",src:o(k)},null,8,["src"])])]),_:1},8,["modelValue"])]),_:1})}}});export{se as default};
